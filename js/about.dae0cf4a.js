(self["webpackChunkvue_h5"]=self["webpackChunkvue_h5"]||[]).push([[443],{7634:function(e,t,o){"use strict";o(7658),function(t,o){e.exports=o()}(0,(function(){function e(e){var n=[];return e.AMapUI&&n.push(t(e.AMapUI)),e.Loca&&n.push(o(e.Loca)),Promise.all(n)}function t(e){return new Promise((function(t,o){var s=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==a.AMapUI.plugins.indexOf(e.plugins[c])&&s.push(e.plugins[c]);if(l.AMapUI===n.failed)o("前次请求 AMapUI 失败");else if(l.AMapUI===n.notload){l.AMapUI=n.loading,a.AMapUI.version=e.version||a.AMapUI.version,c=a.AMapUI.version;var r=document.body||document.head,u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/ui/"+c+"/main.js",u.onerror=function(e){l.AMapUI=n.failed,o("请求 AMapUI 失败")},u.onload=function(){if(l.AMapUI=n.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var n=s[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}for(t();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(t();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},r.appendChild(u)}else l.AMapUI===n.loaded?e.version&&e.version!==a.AMapUI.version?o("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var n=s[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}t()})):t():e.version&&e.version!==a.AMapUI.version?o("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?o(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var n=s[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}t()})):t()}))}))}function o(e){return new Promise((function(t,o){if(l.Loca===n.failed)o("前次请求 Loca 失败");else if(l.Loca===n.notload){l.Loca=n.loading,a.Loca.version=e.version||a.Loca.version;var s=a.Loca.version,c=a.AMap.version.startsWith("2"),r=s.startsWith("2");if(c&&!r||!c&&r)o("JSAPI 与 Loca 版本不对应！！");else{c=a.key,r=document.body||document.head;var u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/loca?v="+s+"&key="+c,u.onerror=function(e){l.Loca=n.failed,o("请求 AMapUI 失败")},u.onload=function(){for(l.Loca=n.loaded,t();i.Loca.length;)i.Loca.splice(0,1)[0]()},r.appendChild(u)}}else l.Loca===n.loaded?e.version&&e.version!==a.Loca.version?o("不允许多个版本 Loca 混用"):t():e.version&&e.version!==a.Loca.version?o("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?o(e):o()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]},s=[],c=function(e){"function"==typeof e&&(l.AMap===n.loaded?e(window.AMap):s.push(e))};return{load:function(t){return new Promise((function(o,i){if(l.AMap==n.failed)i("");else if(l.AMap==n.notload){var r=t.key,u=t.version,p=t.plugins;r?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),a.key=r,a.AMap.version=u||a.AMap.version,a.AMap.plugins=p||a.AMap.plugins,l.AMap=n.loading,u=document.body||document.head,window.___onAPILoaded=function(a){if(delete window.___onAPILoaded,a)l.AMap=n.failed,i(a);else for(l.AMap=n.loaded,e(t).then((function(){o(window.AMap)}))["catch"](i);s.length;)s.splice(0,1)[0]()},p=document.createElement("script"),p.type="text/javascript",p.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+a.AMap.version+"&key="+r+"&plugin="+a.AMap.plugins.join(","),p.onerror=function(e){l.AMap=n.failed,i(e)},u.appendChild(p)):i("请填写key")}else if(l.AMap==n.loaded)if(t.key&&t.key!==a.key)i("多个不一致的 key");else if(t.version&&t.version!==a.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(r=[],t.plugins)for(u=0;u<t.plugins.length;u+=1)-1==a.AMap.plugins.indexOf(t.plugins[u])&&r.push(t.plugins[u]);r.length?window.AMap.plugin(r,(function(){e(t).then((function(){o(window.AMap)}))["catch"](i)})):e(t).then((function(){o(window.AMap)}))["catch"](i)}else if(t.key&&t.key!==a.key)i("多个不一致的 key");else if(t.version&&t.version!==a.AMap.version)i("不允许多个版本 JSAPI 混用");else{var d=[];if(t.plugins)for(u=0;u<t.plugins.length;u+=1)-1==a.AMap.plugins.indexOf(t.plugins[u])&&d.push(t.plugins[u]);c((function(){d.length?window.AMap.plugin(d,(function(){e(t).then((function(){o(window.AMap)}))["catch"](i)})):e(t).then((function(){o(window.AMap)}))["catch"](i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]}}}}))},6610:function(e,t){var o,n,a;(function(l,i){n=[],o=i,a="function"===typeof o?o.apply(t,n):o,void 0===a||(e.exports=a)})(0,(function(){var e=52.35987755982988,t=3.141592653589793,o=6378245,n=.006693421622965943,a=function(t,o){t=+t,o=+o;var n=t-.0065,a=o-.006,l=Math.sqrt(n*n+a*a)-2e-5*Math.sin(a*e),i=Math.atan2(a,n)-3e-6*Math.cos(n*e),s=l*Math.cos(i),c=l*Math.sin(i);return[s,c]},l=function(t,o){o=+o,t=+t;var n=Math.sqrt(t*t+o*o)+2e-5*Math.sin(o*e),a=Math.atan2(o,t)+3e-6*Math.cos(t*e),l=n*Math.cos(a)+.0065,i=n*Math.sin(a)+.006;return[l,i]},i=function(e,a){a=+a,e=+e;if(u(e,a))return[e,a];var l=c(e-105,a-35),i=r(e-105,a-35),s=a/180*t,p=Math.sin(s);p=1-n*p*p;var d=Math.sqrt(p);l=180*l/(o*(1-n)/(p*d)*t),i=180*i/(o/d*Math.cos(s)*t);var m=a+l,f=e+i;return[f,m]},s=function(e,a){a=+a,e=+e;if(u(e,a))return[e,a];var l=c(e-105,a-35),i=r(e-105,a-35),s=a/180*t,p=Math.sin(s);p=1-n*p*p;var d=Math.sqrt(p);l=180*l/(o*(1-n)/(p*d)*t),i=180*i/(o/d*Math.cos(s)*t);var m=a+l,f=e+i;return[2*e-f,2*a-m]},c=function(e,o){o=+o,e=+e;var n=2*e-100+3*o+.2*o*o+.1*e*o+.2*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t)+20*Math.sin(2*e*t))/3,n+=2*(20*Math.sin(o*t)+40*Math.sin(o/3*t))/3,n+=2*(160*Math.sin(o/12*t)+320*Math.sin(o*t/30))/3,n},r=function(e,o){o=+o,e=+e;var n=300+e+2*o+.1*e*e+.1*e*o+.1*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t)+20*Math.sin(2*e*t))/3,n+=2*(20*Math.sin(e*t)+40*Math.sin(e/3*t))/3,n+=2*(150*Math.sin(e/12*t)+300*Math.sin(e/30*t))/3,n},u=function(e,t){t=+t,e=+e;return!(e>73.66&&e<135.05&&t>3.86&&t<53.55)};return{bd09togcj02:a,gcj02tobd09:l,wgs84togcj02:i,gcj02towgs84:s}}))},89:function(e,t){"use strict";t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o}},3495:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ue}});var n=o(3396),a=o(4870),l=o(7387),i=o.n(l),s=o(4161);const c={class:"popup-example-block"},r=(0,n.Uk)("关卡列表"),u=(0,n.Uk)("1"),p={class:"popup-example-block2"},d=(0,n.Uk)("2"),m={class:"popup-example-block2"},f=(0,n.Uk)("3"),g={class:"popup-example-block2"},h=(0,n.Uk)("4"),v={class:"popup-example-block2"},w=(0,n.Uk)("5"),b={class:"popup-example-block2"},_=(0,n.Uk)("6"),k={class:"popup-example-block2"},W=(0,n.Uk)("7"),M={class:"popup-example-block2"},y=(0,n.Uk)("8"),U={class:"popup-example-block2"},x=(0,n.Uk)("9"),I={class:"popup-example-block2"},A=(0,n.Uk)("10"),P={class:"popup-example-block2"},D=(0,n.Uk)("11"),C={class:"popup-example-block2"},F=(0,n.Uk)("12"),S={class:"popup-example-block2"},L=(0,n.Uk)("13"),H={class:"popup-example-block2"},$=(0,n.Uk)("14"),z={class:"popup-example-block2"},T=(0,n.Uk)("15"),E={class:"popup-example-block2"};var N={setup(e){const t=(0,a.iH)(!1),o=(0,a.iH)(!1),l=(0,a.iH)(!1),i=(0,a.iH)(!1),s=(0,a.iH)(!1),N=(0,a.iH)(!1),q=(0,a.iH)(!1),j=(0,a.iH)(!1),R=(0,a.iH)(!1),B=(0,a.iH)(!1),O=(0,a.iH)(!1),V=(0,a.iH)(!1),Z=(0,a.iH)(!1),G=(0,a.iH)(!1),J=(0,a.iH)(!1),Y=()=>{t.value=!0},K=()=>{o.value=!0},Q=()=>{l.value=!0},X=()=>{i.value=!0},ee=()=>{s.value=!0},te=()=>{N.value=!0},oe=()=>{q.value=!0},ne=()=>{j.value=!0},ae=()=>{R.value=!0},le=()=>{B.value=!0},ie=()=>{O.value=!0},se=()=>{V.value=!0},ce=()=>{Z.value=!0},re=()=>{G.value=!0},ue=()=>{J.value=!0};var pe=["https://cdn-icons-png.flaticon.com/512/2559/2559764.png","https://cdn-icons-png.flaticon.com/512/6254/6254289.png","https://cdn-icons-png.flaticon.com/512/6254/6254229.png","https://cdn-icons-png.flaticon.com/512/5824/5824199.png","https://cdn-icons-png.flaticon.com/512/5824/5824024.png","https://cdn-icons-png.flaticon.com/512/5824/5824242.png","https://cdn-icons-png.flaticon.com/512/5823/5823877.png","https://cdn-icons-png.flaticon.com/512/5823/5823393.png","https://cdn-icons-png.flaticon.com/512/7028/7028424.png","https://cdn-icons-png.flaticon.com/512/6893/6893876.png","https://cdn-icons-png.flaticon.com/512/6893/6893943.png","https://cdn-icons-png.flaticon.com/512/4632/4632821.png","https://cdn-icons-png.flaticon.com/512/4506/4506395.png","https://cdn-icons-png.flaticon.com/512/4496/4496160.png","https://cdn-icons-png.flaticon.com/512/4496/4496347.png","https://cdn-icons-png.flaticon.com/512/4079/4079547.png","https://cdn-icons-png.flaticon.com/512/3896/3896175.png","https://cdn-icons-png.flaticon.com/512/2856/2856854.png","https://cdn-icons-png.flaticon.com/512/2849/2849549.png","https://cdn-icons-png.flaticon.com/512/1878/1878611.png","https://cdn-icons-png.flaticon.com/512/1878/1878127.png"];return(e,de)=>{const me=(0,n.up)("popup-block-title"),fe=(0,n.up)("van-icon"),ge=(0,n.up)("font"),he=(0,n.up)("van-grid-item"),ve=(0,n.up)("van-grid"),we=(0,n.up)("van-popup");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(me,null,{default:(0,n.w5)((()=>[r])),_:1}),(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{"is-link":"",onClick:Y},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[0],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[u])),_:1})])),_:1}),(0,n.Wm)(we,{show:t.value,"onUpdate:show":de[0]||(de[0]=e=>t.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",p,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",to:"/pipe1"}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:"https://router.map.qq.com/short?l=2a3d7f4e0815ea6537818ae08e242b28&tempSource=pcMap"}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=1&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:K},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[1],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[d])),_:1})])),_:1}),(0,n.Wm)(we,{show:o.value,"onUpdate:show":de[1]||(de[1]=e=>o.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",m,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",to:"/pipe2"}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:"https://router.map.qq.com/short?l=bb3d63c25e0e1ef05aa7a8a96aec61e3&tempSource=pcMap"}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=2&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:Q},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[2],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[f])),_:1})])),_:1}),(0,n.Wm)(we,{show:l.value,"onUpdate:show":de[2]||(de[2]=e=>l.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=3&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:X},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[3],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[h])),_:1})])),_:1}),(0,n.Wm)(we,{show:i.value,"onUpdate:show":de[3]||(de[3]=e=>i.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",v,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=4&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ee},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[4],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[w])),_:1})])),_:1}),(0,n.Wm)(we,{show:s.value,"onUpdate:show":de[4]||(de[4]=e=>s.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=5&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:te},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[5],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[_])),_:1})])),_:1}),(0,n.Wm)(we,{show:N.value,"onUpdate:show":de[5]||(de[5]=e=>N.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",k,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=6&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:oe},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[6],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[W])),_:1})])),_:1}),(0,n.Wm)(we,{show:q.value,"onUpdate:show":de[6]||(de[6]=e=>q.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",M,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=7&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ne},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[7],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[y])),_:1})])),_:1}),(0,n.Wm)(we,{show:j.value,"onUpdate:show":de[7]||(de[7]=e=>j.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",U,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=8&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ae},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[8],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[x])),_:1})])),_:1}),(0,n.Wm)(we,{show:R.value,"onUpdate:show":de[8]||(de[8]=e=>R.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",I,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=9&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:le},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[9],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[A])),_:1})])),_:1}),(0,n.Wm)(we,{show:B.value,"onUpdate:show":de[9]||(de[9]=e=>B.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",P,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=10&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ie},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[10],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[D])),_:1})])),_:1}),(0,n.Wm)(we,{show:O.value,"onUpdate:show":de[10]||(de[10]=e=>O.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=11&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:se},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[11],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[F])),_:1})])),_:1}),(0,n.Wm)(we,{show:V.value,"onUpdate:show":de[11]||(de[11]=e=>V.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",S,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=12&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ce},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[12],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[L])),_:1})])),_:1}),(0,n.Wm)(we,{show:Z.value,"onUpdate:show":de[12]||(de[12]=e=>Z.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",H,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=13&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:re},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[13],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[$])),_:1})])),_:1}),(0,n.Wm)(we,{show:G.value,"onUpdate:show":de[13]||(de[13]=e=>G.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",z,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=14&backurl=about"})])),_:1})])])),_:1},8,["show"]),(0,n.Wm)(he,{"is-link":"",onClick:ue},{default:(0,n.w5)((()=>[(0,n.Wm)(fe,{name:(0,a.SU)(pe)[14],size:"45"},null,8,["name"]),(0,n.Wm)(ge,{color:"#2c3e50",size:"2"},{default:(0,n.w5)((()=>[T])),_:1})])),_:1}),(0,n.Wm)(we,{show:J.value,"onUpdate:show":de[14]||(de[14]=e=>J.value=e),"bind:close":"closePopup"},{default:(0,n.w5)((()=>[(0,n._)("div",E,[(0,n.Wm)(ve,{clickable:"","column-num":3},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{icon:"search",text:"线索",url:""}),(0,n.Wm)(he,{icon:"location-o",text:"导航",url:""}),(0,n.Wm)(he,{icon:"passed",text:"打卡",to:"/loctry2?roundID=&stage=15&backurl=about"})])),_:1})])])),_:1},8,["show"])])),_:1})])}}};const q=N;var j=q,R=o(2814),B=o(6561),O=o.p+"img/one3.9463677a.png",V=o.p+"img/one4.8299ff32.png";const Z=(0,n._)("header",null,null,-1),G={id:"building1"},J={id:"gifbg"},Y=(0,n.uE)('<div class="infosquare"><div class="avatar"><img src="" id="avatar_img"></div><div class="userinfo1" id="userinfo1">系统用户</div><div class="userinfo2" id="userinfo2">本月积分:0</div></div>',1),K={class:"rightside"},Q={class:"rightcomb"},X={class:"popup-example-block"},ee=(0,n.Uk)("玩法说明"),te=(0,n._)("div",{class:"righttitle"},"帮助",-1),oe={class:"leftbutton1"},ne=(0,n.Uk)("闯关打卡"),ae={class:"leftbutton2"},le=(0,n.Uk)("结束巡查"),ie={class:"leftbutton3"},se=(0,n.Uk)("问题上报");var ce={setup(e){const t=(0,n.FN)()?.appContext.config.globalProperties.$userId,o=(0,n.FN)()?.appContext.config.globalProperties.$hostSite,l=(0,n.FN)()?.appContext.config.globalProperties.$slpToken,c=(0,n.FN)()?.appContext.config.globalProperties.$MonthlyFormId,r=(0,n.FN)()?.appContext.config.globalProperties.$MonthlyFormFieldId,u=window.location.hash.split("=")[1],p="/loctry?backurl=about&roundID="+u;console.log("ABOUT userId1 roundId",t,u);const d=o+"/api/v4/users/"+t,m=(0,a.iH)(!1),f=(0,a.iH)(!1);function g(){let e=new Date,t=e.getFullYear(),o=e.getMonth()+1;return o<10&&(o=`0${o}`),`${t}${o}`}var h=g();let v=s.Z.create({headers:{Authorization:l}});const w=async()=>{const e=await v.get(d);return e};w().then((e=>{var t=e.data.nickname,o=e.data.headimgurl;i()("#userinfo1").html(t),i()("#avatar_img").attr("src",o)}));const b=async()=>{const e=o+"/api/v4/forms/"+c+"/responses/search.json?page=1&per_page=1&query%5B"+r.userID+"%5D="+t+"&query%5B"+r.month+"%5D="+h,n=await v.get(e);return n};return b().then((e=>{var t=e.data[0].mapped_values.points.value[0];i()("#userinfo2").html("本月积分:"+t)})),(e,t)=>{const o=(0,n.up)("var-icon"),l=(0,n.up)("var-button"),i=(0,n.up)("popup-block-title"),s=(0,n.up)("var-popup"),c=(0,n.up)("font"),r=(0,n.up)("van-button"),u=(0,n.up)("var-image");return(0,n.wg)(),(0,n.iD)("body",null,[Z,(0,n._)("div",G,[(0,n._)("div",J,[Y,(0,n._)("div",K,[(0,n._)("div",Q,[(0,n.Wm)(l,{round:"",color:"#ffffffcc",onClick:t[0]||(t[0]=e=>m.value=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{name:"help-circle-outline",size:26})])),_:1}),(0,n.Wm)(s,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e)},{default:(0,n.w5)((()=>[(0,n._)("div",X,[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[ee])),_:1}),(0,n.Wm)(R.Z)])])),_:1},8,["show"]),te])]),(0,n._)("div",oe,[(0,n.Wm)(r,{class:"mainbutton",color:"#ffffffcc",onClick:t[2]||(t[2]=e=>f.value=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{color:"#2c3e50"},{default:(0,n.w5)((()=>[ne])),_:1})])),_:1}),(0,n.Wm)(u,{src:(0,a.SU)(O)},null,8,["src"]),(0,n.Wm)(s,{show:f.value,"onUpdate:show":t[3]||(t[3]=e=>f.value=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(j)])),_:1},8,["show"])]),(0,n._)("div",ae,[(0,n.Wm)(r,{to:p,class:"mainbutton",color:"#ffffffcc"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{color:"#2c3e50"},{default:(0,n.w5)((()=>[le])),_:1})])),_:1}),(0,n.Wm)(u,{src:(0,a.SU)(B)},null,8,["src"])]),(0,n._)("div",ie,[(0,n.Wm)(r,{url:"https://www.cdhtgx.com/namespaces/1/yet_another_workflow/flows/1439/journeys/new",class:"mainbutton",color:"#ffffffcc"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{color:"#2c3e50"},{default:(0,n.w5)((()=>[se])),_:1})])),_:1}),(0,n.Wm)(u,{src:(0,a.SU)(V)},null,8,["src"])])])])])}}};const re=ce;var ue=re},8478:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return f}});o(7658);var n=o(3396),a=o(9242),l=o(7634),i=o.n(l);const s=e=>((0,n.dD)("data-v-6d7baeba"),e=e(),(0,n.Cn)(),e),c=s((()=>(0,n._)("header",null,null,-1))),r={id:"container"},u=s((()=>(0,n._)("div",{class:"info"},[(0,n._)("h4",{id:"status"}),(0,n._)("hr"),(0,n._)("p",{id:"result"}),(0,n._)("hr")],-1)));var p={setup(e){var t=o(6610);const l=(0,n.FN)()?.appContext.config.globalProperties.$paths,s=(0,n.FN)()?.appContext.config.globalProperties.$points,p=window.location.hash.split("&")[1].split("=")[1];function d(){i().load({key:"3e1217f80b69910259f04c3a071bbd98",version:"2.0"}).then((e=>{const o=new e.Map("container",{viewMode:"2D",zoom:10,center:[104.077021,30.586148]});function n(o){document.getElementById("status").innerHTML="定位成功";var n=[];console.log("data.position",o.position.lat,o.position.lng),n.push("定位结果："+o.position),n.push("定位类别："+o.location_type),o.accuracy&&n.push("精度："+o.accuracy+" 米"),console.log("result",n),console.log("coordtransform",t.wgs84togcj02(o.position.lng,o.position.lat));var a=t.wgs84togcj02(o.position.lng,o.position.lat);n.push("转换结果："+a);var i=e.GeometryUtil.isPointInRing(a,l);console.log("isPointInRing",i),n.push("是否在范围内："+i);var c=new e.LngLat(a[0],a[1]),r=new e.LngLat(s[p][0],s[p][1]);console.log("path distance",c.distance(r)),n.push("与关卡"+p+"的距离："+c.distance(r)),document.getElementById("result").innerHTML=n.join("<br>")}function a(e){document.getElementById("status").innerHTML="定位失败",document.getElementById("result").innerHTML="失败原因排查信息:"+e.message,alert("定位失败...请确认定位服务已打开..."),window.history.back(-1)}e.plugin("AMap.Geolocation",(function(){var t=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new e.Pixel(10,20),zoomToAccuracy:!0});o.addControl(t),t.getCurrentPosition((function(e,t){"complete"==e?n(t):a(t)}))}))})).catch((e=>{console.log(e)}))}return d(),(e,t)=>((0,n.wg)(),(0,n.iD)("body",null,[c,(0,n.wy)((0,n._)("div",r,null,512),[[a.F8,!1]]),u]))}},d=o(89);const m=(0,d.Z)(p,[["__scopeId","data-v-6d7baeba"]]);var f=m},205:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return W}});o(7658);var n=o(3396),a=o(9242),l=o(7634),i=o.n(l),s=o(2483),c=o(4161);const r=e=>((0,n.dD)("data-v-0b6146cc"),e=e(),(0,n.Cn)(),e),u=r((()=>(0,n._)("header",null,null,-1))),p={id:"building"},d={id:"container"},m={class:"info"},f=r((()=>(0,n._)("h4",{id:"status"},null,-1))),g=r((()=>(0,n._)("hr",null,null,-1))),h=r((()=>(0,n._)("p",{id:"result"},null,-1))),v=r((()=>(0,n._)("hr",null,null,-1))),w=[f,g,h,v];var b={setup(e){var t=o(6610);const l=(0,n.FN)()?.appContext.config.globalProperties.$userId,r=(0,n.FN)()?.appContext.config.globalProperties.$hostSite,f=(0,n.FN)()?.appContext.config.globalProperties.$formId,g=(0,n.FN)()?.appContext.config.globalProperties.$slpToken,h=(0,n.FN)()?.appContext.config.globalProperties.$formFieldId,v=(0,n.FN)()?.appContext.config.globalProperties.$paths,b=(0,n.FN)()?.appContext.config.globalProperties.$pointsFormId,_=(0,n.FN)()?.appContext.config.globalProperties.$pointsFormFieldId,k=(0,s.tv)(),W=window.location.hash.split("&")[0].split("=")[1],M=window.location.hash.split("&")[1].split("=")[1];var y=" ";function U(e){var t=new Date,o=String(t.getTime())+String(e);return o}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};let x=c.Z.create({headers:{Authorization:g}});const I=async(e,t)=>{const o=await x.post(e,t);return o};I().then((e=>{console.log("PostData",e)}));const A=async(e,t)=>{const o=await x.put(e,t);return o};function P(e,t,o,n,a,l){var i=e+"/api/v4/forms/"+String(t)+"/responses",s=(new Date).Format("yyyy-MM-dd HH:mm:ss"),c="进行中";console.log(i,o,n,s,a,c,l);var r={response:{entries_attributes:[{field_id:l.roundID,value:o},{field_id:l.userId,value:n},{field_id:l.startTime,value:s},{field_id:l.state,value:c},{field_id:l.startLoc,value:a}]},user_id:n};console.log("data",r),I(i,r)}function D(){i().load({key:"3e1217f80b69910259f04c3a071bbd98",version:"2.0"}).then((e=>{const o=new e.Map("container",{viewMode:"2D",zoom:10,center:[104.077021,30.586148]});function n(o){document.getElementById("status").innerHTML="定位成功";var n=[];console.log("data.position",o.position.lat,o.position.lng),n.push("定位结果："+o.position),n.push("定位类别："+o.location_type),o.accuracy&&n.push("精度："+o.accuracy+" 米"),console.log("result",n),console.log("coordtransform",t.wgs84togcj02(o.position.lng,o.position.lat));var a=t.wgs84togcj02(o.position.lng,o.position.lat);y=String(a),console.log("point",a),console.log("path",v),n.push("转换结果："+a);var i=e.GeometryUtil.isPointInRing(a,v);if(console.log("isPointInRing",i),n.push("是否在范围内："+i),document.getElementById("result").innerHTML=n.join("<br>"),"home"==W)if(i){alert("定位成功! 巡河冒险出发！");var s=U(l);P(r,f,s,l,String(a),h),k.push({path:"/about",query:{roundID:s}})}else alert("定位成功! 您不在巡查范围内，请确认已到河边再开始您的冒险哦~"),window.history.back(-1);else"about"==W&&(i?(alert("定位成功! 巡河冒险结束！"),console.log("String(point)1",String(a)),C(),k.push({path:"/",query:{user:l}})):(alert("定位成功! 您不在巡查范围内，请回到河边才能结束您的冒险哦~"),window.history.back(-1)))}function a(e){document.getElementById("status").innerHTML="定位失败",document.getElementById("result").innerHTML="失败原因排查信息:"+e.message,alert("定位失败...请确认定位服务已打开..."),window.history.back(-1)}e.plugin("AMap.Geolocation",(function(){var t=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new e.Pixel(10,20),zoomToAccuracy:!0});o.addControl(t),t.getCurrentPosition((function(e,t){"complete"==e?n(t):a(t)}))}))})).catch((e=>{console.log(e)}))}A().then((e=>{console.log("PutData",e)}));const C=async()=>{const e=r+"/api/v4/forms/"+f+"/responses/search.json?page=1&per_page=1&query%5B"+h.userId+"%5D="+l,t=await x.get(e);return t};return C().then((e=>{console.log("LocTry GETDATA3",e);var t,o,n=e.data[0].id,a=(new Date).Format("yyyy-MM-dd HH:mm:ss"),i=r+"/api/v4/forms/"+f+"/responses/"+n,s=e.data[0].entries,c=0;for(t in s)if(s[t].field_id==h.state)o=s[t].id;else if(h.stages.includes(s[t].field_id))c+=parseInt(s[t].value),console.log("stage points",c);else if(s[t].field_id==h.startTime){var u=new Date(s[t].value),p=new Date(a),d=(p.getTime()-u.getTime())/1e3/60;d>=15&&(c+=2,console.log("time points",c))}console.log("final points",c);var m={response:{entries_attributes:[{field_id:h.endTime,value:a},{field_id:h.endLoc,value:y},{field_id:h.points,value:c},{field_id:h.state,value:"已结束",id:o}]},user_id:l};console.log("changedata",m),A(i,m);var g=r+"/api/v4/forms/"+b+"/responses",v={response:{entries_attributes:[{field_id:_.key,value:M},{field_id:_.userID,value:l},{field_id:_.point,value:c},{field_id:_.source,value:"巡查打卡"},{field_id:_.createtime,value:a}]},user_id:l};console.log("postdata",v),I(g,v)})),D(),(e,t)=>((0,n.wg)(),(0,n.iD)("body",null,[u,(0,n._)("div",p,[(0,n.wy)((0,n._)("div",d,null,512),[[a.F8,!1]]),(0,n.wy)((0,n._)("div",m,w,512),[[a.F8,!1]])])]))}},_=o(89);const k=(0,_.Z)(b,[["__scopeId","data-v-0b6146cc"]]);var W=k},3769:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return W}});o(7658);var n=o(3396),a=o(9242),l=o(7634),i=o.n(l),s=o(2483),c=o(4161);const r=e=>((0,n.dD)("data-v-6d7d2242"),e=e(),(0,n.Cn)(),e),u=r((()=>(0,n._)("header",null,null,-1))),p={id:"building"},d={id:"container"},m={class:"info"},f=r((()=>(0,n._)("h4",{id:"status"},null,-1))),g=r((()=>(0,n._)("hr",null,null,-1))),h=r((()=>(0,n._)("p",{id:"result"},null,-1))),v=r((()=>(0,n._)("hr",null,null,-1))),w=[f,g,h,v];var b={setup(e){var t=o(6610);const l=(0,n.FN)()?.appContext.config.globalProperties.$userId,r=(0,n.FN)()?.appContext.config.globalProperties.$hostSite,f=(0,n.FN)()?.appContext.config.globalProperties.$formId,g=(0,n.FN)()?.appContext.config.globalProperties.$slpToken,h=(0,n.FN)()?.appContext.config.globalProperties.$formFieldId,v=(0,n.FN)()?.appContext.config.globalProperties.$paths,b=(0,n.FN)()?.appContext.config.globalProperties.$points,_=(0,s.tv)(),k=window.location.hash.split("&")[1].split("=")[1],W=window.location.hash.split("&")[2].split("=")[1],M=(0,n.FN)()?.appContext.config.globalProperties.$distanceLimit;function y(e){var t=new Date,o=String(t.getTime())+String(e);return o}console.log(k),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};let U=c.Z.create({headers:{Authorization:g}});const x=async(e,t)=>{const o=await U.post(e,t);return o};function I(e,t,o,n,a,l){var i=e+"/api/v4/forms/"+String(t)+"/responses",s=(new Date).Format("yyyy-MM-dd HH:mm:ss"),c="进行中";console.log(i,o,n,s,a,c,l);var r={response:{entries_attributes:[{field_id:l.roundID,value:o},{field_id:l.userId,value:n},{field_id:l.startTime,value:s},{field_id:l.state,value:c},{field_id:l.startLoc,value:a}]},user_id:n};console.log("data",r),x(i,r)}x().then((e=>{console.log("PostData",e)}));const A=async()=>{const e=r+"/api/v4/forms/"+f+"/responses/search.json?page=1&per_page=1&query%5B"+h.userId+"%5D="+l,t=await U.get(e);return t};function P(e,o,n){i().load({key:"3e1217f80b69910259f04c3a071bbd98",version:"2.0"}).then((a=>{const i=new a.Map("container",{viewMode:"2D",zoom:10,center:[104.374926,30.310678]});function s(i){document.getElementById("status").innerHTML="定位成功";var s=[];console.log("data.position",i.position.lat,i.position.lng),s.push("定位结果："+i.position),s.push("定位类别："+i.location_type),i.accuracy&&s.push("精度："+i.accuracy+" 米"),console.log("result",s),console.log("coordtransform",t.wgs84togcj02(i.position.lng,i.position.lat));var c=t.wgs84togcj02(i.position.lng,i.position.lat);console.log("point",c),s.push("转换结果："+c);var u=a.GeometryUtil.isPointInRing(c,v);console.log("isPointInRing",u),s.push("是否在范围内："+u),document.getElementById("result").innerHTML=s.join("<br>");var p=new a.LngLat(c[0],c[1]),d=new a.LngLat(b[k][0],b[k][1]);console.log("path distance",p.distance(d)),"outer"==W?o||u?(!o&&u?(alert("定位成功! 巡河冒险出发！"),I(r,f,e,l,String(c),h)):alert("您在今日有未完成的冒险，请继续加油哦！如果巡河结束请记得点击“结束巡查”哦~"),n?(alert("此次冒险中，该关卡已完成，无法重复打卡哦~"),_.push({path:"/about",query:{roundID:e}})):p.distance(d)<=M?(alert("欢迎来到关卡"+k+",即将跳转打卡页面！"),_.push({path:"/stagereport",query:{roundID:e,stage:k}})):(alert("不好意思，您不在关卡"+k+"范围内，无法发起打卡..."),_.push({path:"/about",query:{roundID:e}}))):(alert("定位成功! 您不在巡查范围内，请确认已到河边再开始您的冒险哦~"),_.push({path:"/",query:{userId:l}})):"about"==W&&(n?(alert("此次冒险中，该关卡已完成，无法重复打卡哦~"),_.push({path:"/about",query:{roundID:e}})):p.distance(d)<=M?(alert("欢迎来到关卡"+k+",即将跳转打卡页面！"),_.push({path:"/stagereport",query:{roundID:e,stage:k}})):(alert("不好意思，您不在关卡"+k+"范围内，无法发起打卡..."),_.push({path:"/about",query:{roundID:e}})))}function c(e){document.getElementById("status").innerHTML="定位失败",document.getElementById("result").innerHTML="失败原因排查信息:"+e.message,alert("定位失败...请确认定位服务已打开..."),window.history.back(-1)}a.plugin("AMap.Geolocation",(function(){var e=new a.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new a.Pixel(10,20),zoomToAccuracy:!0});i.addControl(e),e.getCurrentPosition((function(e,t){"complete"==e?s(t):c(t)}))}))})).catch((e=>{console.log(e)}))}return A().then((e=>{var t,o,n=e.data[0].mapped_values.starttime.text_value[0],a=e.data[0].mapped_values.state.text_value[0],i=(new Date).Format("yyyy-MM-dd")+" 00:00:00",s=!1;n>=i&&"进行中"==a?(t=e.data[0].mapped_values.roundID.text_value[0],void 0!=e.data[0].mapped_values["stage"+k]&&(s=!0),o=!0):(t=y(l),o=!1),P(t,o,s)})),(e,t)=>((0,n.wg)(),(0,n.iD)("body",null,[u,(0,n._)("div",p,[(0,n.wy)((0,n._)("div",d,null,512),[[a.F8,!1]]),(0,n.wy)((0,n._)("div",m,w,512),[[a.F8,!1]])])]))}},_=o(89);const k=(0,_.Z)(b,[["__scopeId","data-v-6d7d2242"]]);var W=k},7830:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var n=o(3396),a=o(4870),l=o.p+"img/pipe1.99499502.jpg",i={setup(e){return(e,t)=>{const o=(0,n.up)("var-image");return(0,n.wg)(),(0,n.j4)(o,{src:(0,a.SU)(l)},null,8,["src"])}}};const s=i;var c=s},9206:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var n=o(3396),a=o(4870),l=o.p+"img/pipe2.bd2714dd.jpg",i={setup(e){return(e,t)=>{const o=(0,n.up)("var-image");return(0,n.wg)(),(0,n.j4)(o,{src:(0,a.SU)(l)},null,8,["src"])}}};const s=i;var c=s},8487:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return p}});o(7658);var n=o(3396),a=o(4161),l=o(2483);const i={id:"building"},s={id:"sucgif"},c=(0,n.Uk)("闯 关 成 功！");var r={setup(e){const t=(0,l.tv)(),o=(0,n.FN)()?.appContext.config.globalProperties.$userId,r=(0,n.FN)()?.appContext.config.globalProperties.$slpToken,u=(0,n.FN)()?.appContext.config.globalProperties.$hostSite,p=(0,n.FN)()?.appContext.config.globalProperties.$formId,d=(0,n.FN)()?.appContext.config.globalProperties.$formFieldId,m=window.location.hash.split("&")[0].split("=")[1],f=window.location.hash.split("&")[1].split("=")[1];let g=a.Z.create({headers:{Authorization:r}});function h(e){var t=(new Date).getTime(),o=t+e;while((new Date).getTime()<o)if((new Date).getTime()>o)return}const v=async(e,t)=>{const o=await g.put(e,t);return o};v().then((e=>{console.log("PutData",e)}));const w=async()=>{const e=u+"/api/v4/forms/"+p+"/responses/search.json?page=1&per_page=1&query%5B"+d.userId+"%5D="+o,t=await g.get(e);return t};return w().then((e=>{var n=e.data[0].id,a=u+"/api/v4/forms/"+String(p)+"/responses/"+n,l={response:{entries_attributes:[{field_id:d.stages[parseInt(f)-1],value:"1"}]},user_id:o};v(a,l),h(3e3),console.log(t,m),t.push({path:"/about",query:{roundID:m}})})),(e,t)=>{const o=(0,n.up)("suctext");return(0,n.wg)(),(0,n.iD)("body",null,[(0,n._)("div",i,[(0,n._)("div",s,[(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[c])),_:1})])])])}}};const u=r;var p=u},1545:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ae}});o(7658);var n=o(3396),a=o(7139),l=o(4870),i=o(4161),s=o(6737),c=o(3693),r=o(2483);const u=(0,n._)("head",null,null,-1),p={class:"title"},d=(0,n._)("br",null,null,-1),m=(0,n.Uk)("打卡上报"),f={class:"formspace"},g=(0,n.Uk)("没有发现问题"),h=(0,n._)("br",null,null,-1),v=(0,n.Uk)("排口-河道沿岸餐饮商铺、企业、"),w=(0,n._)("br",null,null,-1),b=(0,n.Uk)("在建工地、居民等存在直排废"),_=(0,n._)("br",null,null,-1),k=(0,n.Uk)("污水，存在倾倒垃圾、余泥渣土、"),W=(0,n._)("br",null,null,-1),M=(0,n.Uk)("建筑废弃物等行为"),y=(0,n.Uk)("排口-入河排口有污水排放，排放"),U=(0,n._)("br",null,null,-1),x=(0,n.Uk)("水体的颜色、气味异常"),I=(0,n.Uk)("水体-水面有明显漂浮物和生活垃圾"),A=(0,n.Uk)("水体-水面有动物遗骸"),P=(0,n.Uk)("水体-水体有异味，水体颜色异常，"),D=(0,n._)("br",null,null,-1),C=(0,n.Uk)("呈黑色、白色、黄色等"),F=(0,n.Uk)("河床-枯水期河床有淤泥堆积"),S=(0,n.Uk)("河床-河滩区存在养殖、种菜的行为"),L=(0,n.Uk)("河床-存在盗采砂石行为"),H=(0,n.Uk)("堤岸-河长公示牌存在倾斜、破损、"),$=(0,n._)("br",null,null,-1),z=(0,n.Uk)("变形、变色、老化、字体不清等"),T=(0,n._)("br",null,null,-1),E=(0,n.Uk)("问题，河长职务、姓名、电话被"),N=(0,n._)("br",null,null,-1),q=(0,n.Uk)("遮挡等"),j=(0,n.Uk)("堤岸-河岸绿化带存在焚烧落叶、"),R=(0,n._)("br",null,null,-1),B=(0,n.Uk)("不文明祭祀的行为"),O=(0,n.Uk)("堤岸-存在非法垂钓、电鱼、网鱼、"),V=(0,n._)("br",null,null,-1),Z=(0,n.Uk)("药鱼等破坏水生态环境的行为"),G=(0,n.Uk)("堤岸-岸边有白色垃圾、宠物大便等"),J=(0,n.Uk)("公共设施-河堤步道路面破损，"),Y=(0,n._)("br",null,null,-1),K=(0,n.Uk)("影响行走"),Q=(0,n.Uk)("公共设施-河堤护栏损坏、缺失，"),X=(0,n._)("br",null,null,-1),ee=(0,n.Uk)("存在安全隐患问题"),te=(0,n.Uk)(" 确认上报 ");var oe={setup(e){const t=(0,r.tv)();(0,s.ZP)({"--option-height":"75px"});const o=(0,n.FN)()?.appContext.config.globalProperties.$userId,oe=(0,n.FN)()?.appContext.config.globalProperties.$stageFlowId,ne=(0,n.FN)()?.appContext.config.globalProperties.$flowFieldId,ae=(0,n.FN)()?.appContext.config.globalProperties.$slpToken,le=(0,n.FN)()?.appContext.config.globalProperties.$hostSite,ie=window.location.hash.split("&")[0].split("=")[1],se=window.location.hash.split("&")[1].split("=")[1];var ce,re;const ue=(0,l.qj)({problem:void 0,class:[],handle:void 0,files:[]}),pe=(0,l.iH)(null),de=(0,l.iH)(!1),me=(0,l.iH)(!1);function fe(e){var t=(new Date).getTime(),o=t+e;while((new Date).getTime()<o)if((new Date).getTime()>o)return}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};var ge=(new Date).Format("yyyy-MM-dd HH:mm:ss");let he=i.Z.create({headers:{Authorization:ae}});const ve=async()=>{const e=le+"/api/v4/users/"+o,t=await he.get(e);return t},we=async(e,t)=>{const o=await he.post(e,t);return o};function be(){console.log(ue),c.ZP.success("打卡成功"),ve().then((e=>{var n,a,l;ce=e.data.nickname,re=e.data.phone,console.log("log",oe,o,ie,ge,ce,re,se,ue.problem,String(ue.class),ue.handle),n="否"==ue.problem?ne.problemOptionFalse:ne.problemOptionTrue,a="否"==ue.handle?ne.handleOptionFalse:ne.handleOptionTrue,console.log(ue.files.length),l=ue.files.length>0?String(ue.files[0].url):"null";var i={assignment:{operation:"route",response_attributes:{entries_attributes:[{field_id:ne.userID,value:o},{field_id:ne.roundID,value:ie},{field_id:ne.reporttime,value:ge},{field_id:ne.nickname,value:ce},{field_id:ne.phone,value:re},{field_id:ne.stage,value:se},{field_id:ne.problem,option_id:n},{field_id:ne.class,value:String(ue.class)},{field_id:ne.handle,option_id:a},{field_id:ne.picURL,value:l}]}},user_id:o,webhook:{payload_url:"",subscribed_events:["JourneyStatusEvent"]}},s={assignment:{operation:"propose",next_vertex_id:ne.next_vertex_id},user_id:o,webhook:{payload_url:"",subscribed_events:["JourneyStatusEvent"]}},c=le+"/api/v4/yaw/flows/"+oe+"/journeys";console.log("data1",i),console.log("data2",s),we(c,i),fe(1e3),we(c,s),t.push({path:"/stagereportsuc",query:{roundID:ie,stage:se}})}))}return we().then((e=>{console.log("PostData",e)})),(e,t)=>{const o=(0,n.up)("var-option"),i=(0,n.up)("var-select"),s=(0,n.up)("var-uploader"),c=(0,n.up)("var-space"),r=(0,n.up)("var-form"),oe=(0,n.up)("var-button");return(0,n.wg)(),(0,n.iD)(n.HY,null,[u,(0,n._)("body",null,[(0,n._)("div",p,[(0,n.Uk)("关卡"+(0,a.zw)((0,l.SU)(se)),1),d,m]),(0,n._)("div",f,[(0,n.Wm)(r,{ref_key:"form",ref:pe,disabled:de.value,readonly:me.value,"scroll-to-error":"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{direction:"column",size:[14,0],wrap:""},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{placeholder:"是否发现问题？",rules:[e=>!!e||"必选"],modelValue:(0,l.SU)(ue).problem,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.SU)(ue).problem=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{label:"是"}),(0,n.Wm)(o,{label:"否"})])),_:1},8,["rules","modelValue"]),(0,n.Wm)(i,{multiple:"",placeholder:"请选择需要上报的问题",rules:[e=>e.length>=1||"至少选择一个问题"],modelValue:(0,l.SU)(ue).class,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.SU)(ue).class=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{label:"没有发现问题"},{default:(0,n.w5)((()=>[g,h])),_:1}),(0,n.Wm)(o,{label:"排口-河道沿岸餐饮商铺、企业、在建工地、居民等存在直排废污水，存在倾倒垃圾、余泥渣土、建筑废弃物等行为"},{default:(0,n.w5)((()=>[v,w,b,_,k,W,M])),_:1}),(0,n.Wm)(o,{label:"排口-入河排口有污水排放，排放水体的颜色、气味异常"},{default:(0,n.w5)((()=>[y,U,x])),_:1}),(0,n.Wm)(o,{label:"水体-水面有明显漂浮物和生活垃圾"},{default:(0,n.w5)((()=>[I])),_:1}),(0,n.Wm)(o,{label:"水体-水面有动物遗骸"},{default:(0,n.w5)((()=>[A])),_:1}),(0,n.Wm)(o,{label:"水体-水体有异味，水体颜色异常，呈黑色、白色、黄色等"},{default:(0,n.w5)((()=>[P,D,C])),_:1}),(0,n.Wm)(o,{label:"河床-枯水期河床有淤泥堆积"},{default:(0,n.w5)((()=>[F])),_:1}),(0,n.Wm)(o,{label:"河床-河滩区存在养殖、种菜的行为"},{default:(0,n.w5)((()=>[S])),_:1}),(0,n.Wm)(o,{label:"河床-存在盗采砂石行为"},{default:(0,n.w5)((()=>[L])),_:1}),(0,n.Wm)(o,{label:"堤岸-河长公示牌存在倾斜、破损、变形、变色、老化、字体不清等问题，河长职务、姓名、电话被遮挡等"},{default:(0,n.w5)((()=>[H,$,z,T,E,N,q])),_:1}),(0,n.Wm)(o,{label:"堤岸-河岸绿化带存在焚烧落叶、不文明祭祀的行为"},{default:(0,n.w5)((()=>[j,R,B])),_:1}),(0,n.Wm)(o,{label:"堤岸-存在非法垂钓、电鱼、网鱼、药鱼等破坏水生态环境的行为"},{default:(0,n.w5)((()=>[O,V,Z])),_:1}),(0,n.Wm)(o,{label:"堤岸-岸边有白色垃圾、宠物大便等"},{default:(0,n.w5)((()=>[G])),_:1}),(0,n.Wm)(o,{label:"公共设施-河堤步道路面破损，影响行走"},{default:(0,n.w5)((()=>[J,Y,K])),_:1}),(0,n.Wm)(o,{label:"公共设施-河堤护栏损坏、缺失，存在安全隐患问题"},{default:(0,n.w5)((()=>[Q,X,ee])),_:1})])),_:1},8,["rules","modelValue"]),(0,n.Wm)(i,{placeholder:"是否可以自行处理？",rules:[e=>!!e||"必选"],modelValue:(0,l.SU)(ue).handle,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.SU)(ue).handle=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{label:"是"}),(0,n.Wm)(o,{label:"否"}),(0,n.Wm)(o,{label:"没有发现问题"})])),_:1},8,["rules","modelValue"]),(0,n.Wm)(s,{rules:[e=>e.length>=1||"至少上传一张图片"],modelValue:(0,l.SU)(ue).files,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,l.SU)(ue).files=e)},null,8,["rules","modelValue"])])),_:1})])),_:1},8,["disabled","readonly"]),(0,n.Wm)(c,{direction:"column",size:[14,0]},{default:(0,n.w5)((()=>[(0,n.Wm)(oe,{block:"",type:"success",onClick:be},{default:(0,n.w5)((()=>[te])),_:1})])),_:1})])])],64)}}};const ne=oe;var ae=ne}}]);